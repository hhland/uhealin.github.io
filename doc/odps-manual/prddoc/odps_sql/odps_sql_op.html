<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>运算符 &mdash; ODPS 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="ODPS 1.0 documentation" href="../../index.html" />
    <link rel="up" title="ODPS SQL" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="odps_sql_grmr.html" title="DDL语句"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="odps_sql_summary.html" title="ODPS SQL概要"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">ODPS 1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">ODPS SQL</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="id1">
<h1>运算符<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="odps-sql-rel-op">
<span id="id2"></span><h2>关系操作符<a class="headerlink" href="#odps-sql-rel-op" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">操作符</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>A=B</td>
<td>如果A或B为NULL，返回NULL；如果A等于B，返回TRUE，否则返回FALSE</td>
</tr>
<tr class="row-odd"><td>A&lt;&gt;B</td>
<td>如果A或B为NULL，返回NULL；如果A不等于B，返回TRUE，否则返回FALSE</td>
</tr>
<tr class="row-even"><td>A&lt;B</td>
<td>如果A或B为NULL，返回NULL；如果A小于B，返回TRUE，否则返回FALSE</td>
</tr>
<tr class="row-odd"><td>A&lt;=B</td>
<td>如果A或B为NULL，返回NULL；如果A小于等于B，返回TRUE，否则返回FALSE</td>
</tr>
<tr class="row-even"><td>A&gt;B</td>
<td>如果A或B为NULL，返回NULL；如果A大于B，返回TRUE，否则返回FALSE</td>
</tr>
<tr class="row-odd"><td>A&gt;=B</td>
<td>如果A或B为NULL，返回NULL；如果A大于等于B，返回TRUE，否则返回FALSE</td>
</tr>
<tr class="row-even"><td>A IS NULL</td>
<td>如果A为NULL，返回TRUE，否则返回FALSE</td>
</tr>
<tr class="row-odd"><td>A IS NOT NULL</td>
<td>如果A不为NULL，返回TRUE，否则返回FALSE</td>
</tr>
<tr class="row-even"><td>A LIKE B</td>
<td><p class="first">如果A或B为NULL，返回NULL，A为字符串，B为要匹配的模式，
如果匹配，返回TRUE，否则返回FALSE。
&#8216;%&#8217;匹配任意多个字符，&#8217;_&#8217;匹配单个字符。
要匹配&#8217;%&#8217;或&#8217;_&#8217;需要用转义符表示&#8217;\%&#8217;，&#8217;\_&#8217;</p>
<ul class="last simple">
<li>&#8216;aaa&#8217; like &#8216;a__&#8217; = TRUE</li>
<li>&#8216;aaa&#8217; like &#8216;a%&#8217; = TRUE</li>
<li>&#8216;aaa&#8217; like &#8216;aab&#8217; = FALSE</li>
<li>&#8216;a%b&#8217; like &#8216;a\%b&#8217; = TRUE</li>
<li>&#8216;axb&#8217; like &#8216;a\%b&#8217; = FALSE</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>A RLIKE B</td>
<td>A是字符串，B是字符串常量正则表达式；
如果匹配成功，返回TRUE，否则返回FALSE；
如果B为空串会报错退出；如果A或B为NULL，返回NULL；</td>
</tr>
<tr class="row-even"><td>A IN B</td>
<td>B是一个集合，如果A为NULL，返回NULL，如A在B中则返回TRUE，否则返回FALSE
若B仅有一个元素NULL，即A IN (NULL)，则返回NULL。
若B含有NULL元素，将NULL视为B集合中其他元素的类型。
B必须是常数并且至少有一项，所有类型要一致</td>
</tr>
</tbody>
</table>
<p>由于ODPS的double值存在一定的精度差，因此，我们不建议直接使用等号=对两个double类型数据进行比较。用户可以使用两个double类型相减，而后取绝对值的方式判断。当绝对值足够小时，认为两个double数值相等，例如</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">abs</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">9999999999</span> <span class="o">-</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0000000000</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">.</span><span class="mi">000000001</span>
    <span class="c1">-- 0.9999999999和1.0000000000为10位精度，而0.000000001为9位精度。</span>
    <span class="c1">-- 此时可以认为0.9999999999和1.0000000000相等。</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Abs是ODPS提供的内建函数，意为取绝对值，详细可参考 <a class="reference internal" href="odps_sql_func.html#odps-sql-function-abs"><em>ABS</em></a> 。</li>
<li>通常情况下，ODPS的double类型能够保障14位有效数字。</li>
</ul>
</div>
</div>
<div class="section" id="odps-sql-arith-op">
<span id="id3"></span><h2>算术操作符<a class="headerlink" href="#odps-sql-arith-op" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">操作符</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>A + B</td>
<td>如果A或B为NULL，返回NULL；否则返回A + B的结果，A和B为bigint类型。</td>
</tr>
<tr class="row-odd"><td>A – B</td>
<td>如果A或B为NULL，返回NULL；否则返回A – B的结果。A和B为bigint类型。</td>
</tr>
<tr class="row-even"><td>A * B</td>
<td>如果A或B为NULL，返回NULL；否则返回A * B的结果。A和B为bigint类型。</td>
</tr>
<tr class="row-odd"><td>A / B</td>
<td>如果A或B为NULL，返回NULL；否则返回A / B的结果。A和B为bigint类型，
结果为double类型。</td>
</tr>
<tr class="row-even"><td>A % B</td>
<td>如果A或B为NULL，返回NULL；否则返回A模B的结果。</td>
</tr>
<tr class="row-odd"><td>+A</td>
<td>仍然返回A。</td>
</tr>
<tr class="row-even"><td>-A</td>
<td>如果A为NULL，返回NULL，否则返回-A。</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">只有string，bigint和double才能参与算术运算，日期型和布尔型不允许参与运算。String在参与运算前会进行隐式类型转换到double。bigint和double共同参与计算时，会将bigint隐式转换为double。</p>
</div>
</div>
<div class="section" id="odps-sql-bit-op">
<span id="id4"></span><h2>位运算操作符<a class="headerlink" href="#odps-sql-bit-op" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">操作符</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>A &amp; B</td>
<td>返回A与B进行按位与的结果。例如：1&amp;2返回0，1&amp;3返回1，NULL与任何值按位与都为NULL。
A和B必须为Bigint类型。</td>
</tr>
<tr class="row-odd"><td>A | B</td>
<td>返回A与B进行按位或的结果。例如：1|2返回3，1|3返回3，NULL与任何值按位或都为NULL。
A和B 必须为Bigint类型。</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">位运算符不支持隐式转换，只允许bigint类型。</p>
</div>
</div>
<div class="section" id="odps-sql-logic-op">
<span id="id5"></span><h2>逻辑操作符<a class="headerlink" href="#odps-sql-logic-op" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">操作符</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>A and B</td>
<td><ul class="first last simple">
<li>TRUE and TRUE=TRUE</li>
<li>TRUE and FALSE=FALSE</li>
<li>FALSE and TRUE=FALSE</li>
<li>FALSE and NULL=FALSE</li>
<li>NULL and FALSE=FALSE</li>
<li>TRUE and NULL=NULL</li>
<li>NULL and TRUE=NULL</li>
<li>NULL and NULL=NULL</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>A or B</td>
<td><ul class="first last simple">
<li>TRUE or TRUE=TRUE</li>
<li>TRUE or FALSE=TRUE</li>
<li>FALSE or TRUE=TRUE</li>
<li>FALSE or NULL=NULL</li>
<li>NULL or FALSE=NULL</li>
<li>TRUE or NULL=TRUE</li>
<li>NULL or TRUE=TRUE</li>
<li>NULL or NULL=NULL</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>NOT A</td>
<td><ul class="first last simple">
<li>如果A是NULL，返回NULL</li>
<li>如果A是TRUE，返回FALSE</li>
<li>如果A是FALSE，返回TRUE</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">逻辑操作符只允许boolean类型参与运算，不支持隐式类型转换。</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">运算符</a><ul>
<li><a class="reference internal" href="#odps-sql-rel-op">关系操作符</a></li>
<li><a class="reference internal" href="#odps-sql-arith-op">算术操作符</a></li>
<li><a class="reference internal" href="#odps-sql-bit-op">位运算操作符</a></li>
<li><a class="reference internal" href="#odps-sql-logic-op">逻辑操作符</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="odps_sql_grmr.html" title="DDL语句"
             >next</a></li>
        <li class="right" >
          <a href="odps_sql_summary.html" title="ODPS SQL概要"
             >previous</a> |</li>
        <li><a href="../../index.html">ODPS 1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >ODPS SQL</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright Alibaba 2014-07-01.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2b1.
    </div>
  <!-- 请把脚本放到 body 元素内 -->
  </body>
</html>