<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_16) on Tue Jun 17 23:21:22 CST 2014 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
TaskContext (SDK 0.12.0 API)
</TITLE>

<META NAME="date" CONTENT="2014-06-17">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TaskContext (SDK 0.12.0 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/TaskContext.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/aliyun/odps/mapred/RunningJob.html" title="interface in com.aliyun.odps.mapred"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/aliyun/odps/mapred/TaskId.html" title="class in com.aliyun.odps.mapred"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/aliyun/odps/mapred/TaskContext.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="TaskContext.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.aliyun.odps.mapred</FONT>
<BR>
Interface TaskContext</H2>
<DL>
<DT><B>All Superinterfaces:</B> <DD><A HREF="../../../../com/aliyun/odps/mapred/JobContext.html" title="interface in com.aliyun.odps.mapred">JobContext</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>TaskContext</B><DT>extends <A HREF="../../../../com/aliyun/odps/mapred/JobContext.html" title="interface in com.aliyun.odps.mapred">JobContext</A></DL>
</PRE>

<P>
MapReduce任务运行时的上下文信息
<P>

<P>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#createMapOutputKeyRecord()">createMapOutputKeyRecord</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;创建Map输出Key的记录对象.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#createMapOutputValueRecord()">createMapOutputValueRecord</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;创建Map输出Value的记录对象</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#createOutputRecord()">createOutputRecord</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;创建默认输出表的记录对象，创建的记录对象会包含表schema信息.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#createOutputRecord(java.lang.String)">createOutputRecord</A></B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;label)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;创建给定label输出表的记录对象，创建的记录对象会包含表schema信息.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/aliyun/odps/counter/Counter.html" title="class in com.aliyun.odps.counter">Counter</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#getCounter(java.lang.Enum)">getCounter</A></B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html?is-external=true" title="class or interface in java.lang">Enum</A>&lt;?&gt;&nbsp;name)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;获取给定名称的Counter对象，name为<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html?is-external=true" title="class or interface in java.lang"><CODE>Enum</CODE></A></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/aliyun/odps/counter/Counter.html" title="class in com.aliyun.odps.counter">Counter</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#getCounter(java.lang.String, java.lang.String)">getCounter</A></B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;group,
           <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;name)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;获取给定组名和名称的 Counter 对象.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/aliyun/odps/data/TableInfo.html" title="class in com.aliyun.odps.data">TableInfo</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#getOutputTableInfo()">getOutputTableInfo</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;获取默认输出的表信息.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/aliyun/odps/mapred/TaskId.html" title="class in com.aliyun.odps.mapred">TaskId</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#getTaskID()">getTaskID</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;获取当前运行Task的标识.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#progress()">progress</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;向 MapReduce 框架报告进度.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/BufferedInputStream.html?is-external=true" title="class or interface in java.io">BufferedInputStream</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#readResourceFileAsStream(java.lang.String)">readResourceFileAsStream</A></B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;resourceName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;读取文件类型资源，返回一个带缓存的输入流.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</A>&lt;<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#readResourceTable(java.lang.String)">readResourceTable</A></B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;resourceName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;读取表类型资源，ODPS的小表（Table）也可以作为资源，大小限制参见ODPS的相关文档.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#write(com.aliyun.odps.data.Record)">write</A></B>(<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A>&nbsp;record)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;写记录到默认输出.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#write(com.aliyun.odps.data.Record, com.aliyun.odps.data.Record)">write</A></B>(<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A>&nbsp;key,
      <A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A>&nbsp;value)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map写记录到中间结果</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#write(com.aliyun.odps.data.Record, java.lang.String)">write</A></B>(<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A>&nbsp;record,
      <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;label)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;写记录到给定标签输出.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_com.aliyun.odps.mapred.JobContext"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from interface com.aliyun.odps.mapred.<A HREF="../../../../com/aliyun/odps/mapred/JobContext.html" title="interface in com.aliyun.odps.mapred">JobContext</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../com/aliyun/odps/mapred/JobContext.html#getCombinerClass()">getCombinerClass</A>, <A HREF="../../../../com/aliyun/odps/mapred/JobContext.html#getGroupingColumns()">getGroupingColumns</A>, <A HREF="../../../../com/aliyun/odps/mapred/JobContext.html#getJobConf()">getJobConf</A>, <A HREF="../../../../com/aliyun/odps/mapred/JobContext.html#getMapOutputKeySchema()">getMapOutputKeySchema</A>, <A HREF="../../../../com/aliyun/odps/mapred/JobContext.html#getMapOutputValueSchema()">getMapOutputValueSchema</A>, <A HREF="../../../../com/aliyun/odps/mapred/JobContext.html#getMapperClass()">getMapperClass</A>, <A HREF="../../../../com/aliyun/odps/mapred/JobContext.html#getNumMapTasks()">getNumMapTasks</A>, <A HREF="../../../../com/aliyun/odps/mapred/JobContext.html#getNumReduceTasks()">getNumReduceTasks</A>, <A HREF="../../../../com/aliyun/odps/mapred/JobContext.html#getReducerClass()">getReducerClass</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getTaskID()"><!-- --></A><H3>
getTaskID</H3>
<PRE>
<A HREF="../../../../com/aliyun/odps/mapred/TaskId.html" title="class in com.aliyun.odps.mapred">TaskId</A> <B>getTaskID</B>()</PRE>
<DL>
<DD>获取当前运行Task的标识.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>当前运行<A HREF="../../../../com/aliyun/odps/mapred/TaskId.html" title="class in com.aliyun.odps.mapred"><CODE>TaskId</CODE></A> 的标识</DL>
</DD>
</DL>
<HR>

<A NAME="getOutputTableInfo()"><!-- --></A><H3>
getOutputTableInfo</H3>
<PRE>
<A HREF="../../../../com/aliyun/odps/data/TableInfo.html" title="class in com.aliyun.odps.data">TableInfo</A>[] <B>getOutputTableInfo</B>()
                               throws <A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>获取默认输出的表信息.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>默认输出的表信息 <A HREF="../../../../com/aliyun/odps/data/TableInfo.html" title="class in com.aliyun.odps.data"><CODE>TableInfo</CODE></A>
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createOutputRecord()"><!-- --></A><H3>
createOutputRecord</H3>
<PRE>
<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A> <B>createOutputRecord</B>()
                          throws <A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>创建默认输出表的记录对象，创建的记录对象会包含表schema信息.
 
 <p>
 最好在<A HREF="../../../../com/aliyun/odps/mapred/Mapper.html#setup(com.aliyun.odps.mapred.TaskContext)"><CODE>Mapper.setup(TaskContext)</CODE></A>和
 <A HREF="../../../../com/aliyun/odps/mapred/Reducer.html#setup(com.aliyun.odps.mapred.TaskContext)"><CODE>Reducer.setup(TaskContext)</CODE></A>
 方法里创建输出记录对象然后重用，避免频繁进行输出记录对象的创建。
 
 <p>
 代码示例：
 
 <pre>
 private Record result;
 
 &#064;Override
 public void setup(TaskContext context) throws IOException {
   result = context.createOutputRecord();
 }
 
 &#064;Override
 public void reduce(Record key, Iterator&lt;Record&gt; values, TaskContext context)
     throws IOException {
   long count = 0;
   while (values.hasNext()) {
     Record val = values.next();
     count += (Long) val.get(0);
   }
   result.set(0, key.get(0));
   result.set(1, count);
   context.write(result);
 }
 
 </pre>
 
 </p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>默认输出表的记录对象
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE><DT><B>See Also:</B><DD><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#write(com.aliyun.odps.data.Record)"><CODE>write(Record)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="createOutputRecord(java.lang.String)"><!-- --></A><H3>
createOutputRecord</H3>
<PRE>
<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A> <B>createOutputRecord</B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;label)
                          throws <A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>创建给定label输出表的记录对象，创建的记录对象会包含表schema信息.
 
 <p>
 最好在<A HREF="../../../../com/aliyun/odps/mapred/Mapper.html#setup(com.aliyun.odps.mapred.TaskContext)"><CODE>Mapper.setup(TaskContext)</CODE></A>和
 <A HREF="../../../../com/aliyun/odps/mapred/Reducer.html#setup(com.aliyun.odps.mapred.TaskContext)"><CODE>Reducer.setup(TaskContext)</CODE></A>
 方法里创建输出记录对象然后重用，避免频繁进行输出记录对象的创建。
 
 <p>
 代码示例：
 
 <pre>
 private Map&lt;String, Record&gt; result;
 
 &#064;Override
 public void setup(TaskContext context) throws IOException {
   TableInfo[] tbls = context.getOutputTableInfo();
   result = new HashMap&lt;String, Record&gt;();
   for (TableInfo tbl : tbls) {
     String lable = tbl.getLabel();
     result.put(lable, context.createOutputRecord(lable));
   }
 }
 
 &#064;Override
 public void reduce(Record key, Iterator&lt;Record&gt; values, TaskContext context)
     throws IOException {
   long count = 0;
   while (values.hasNext()) {
     Record val = values.next();
     count += (Long) val.get(0);
   }
 
   for (String lable : result.keySet()) {
     Record r = result.get(lable);
     r.set(0, key.get(0));
     r.set(1, count);
     context.write(r, lable);
   }
 }
 </pre>
 
 </p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>label</CODE> - 输出标签
<DT><B>Returns:</B><DD>给定label输出表的记录对象
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE><DT><B>See Also:</B><DD><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#write(com.aliyun.odps.data.Record, java.lang.String)"><CODE>write(Record, String)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="createMapOutputKeyRecord()"><!-- --></A><H3>
createMapOutputKeyRecord</H3>
<PRE>
<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A> <B>createMapOutputKeyRecord</B>()
                                throws <A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>创建Map输出Key的记录对象.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD><A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data"><CODE>Record</CODE></A>
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createMapOutputValueRecord()"><!-- --></A><H3>
createMapOutputValueRecord</H3>
<PRE>
<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A> <B>createMapOutputValueRecord</B>()
                                  throws <A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>创建Map输出Value的记录对象
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD><A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data"><CODE>Record</CODE></A>
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="write(com.aliyun.odps.data.Record)"><!-- --></A><H3>
write</H3>
<PRE>
void <B>write</B>(<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A>&nbsp;record)
           throws <A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>写记录到默认输出.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>{@link</CODE> - Record}
          待写出的记录对象
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE><DT><B>See Also:</B><DD><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#createOutputRecord()"><CODE>createOutputRecord()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="write(com.aliyun.odps.data.Record, java.lang.String)"><!-- --></A><H3>
write</H3>
<PRE>
void <B>write</B>(<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A>&nbsp;record,
           <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;label)
           throws <A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>写记录到给定标签输出.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>record</CODE> - 待写出的记录对象
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE><DT><B>See Also:</B><DD><A HREF="../../../../com/aliyun/odps/mapred/TaskContext.html#createOutputRecord(java.lang.String)"><CODE>createOutputRecord(String)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="write(com.aliyun.odps.data.Record, com.aliyun.odps.data.Record)"><!-- --></A><H3>
write</H3>
<PRE>
void <B>write</B>(<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A>&nbsp;key,
           <A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A>&nbsp;value)
           throws <A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>Map写记录到中间结果
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - <DD><CODE>value</CODE> - 
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="readResourceFileAsStream(java.lang.String)"><!-- --></A><H3>
readResourceFileAsStream</H3>
<PRE>
<A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/BufferedInputStream.html?is-external=true" title="class or interface in java.io">BufferedInputStream</A> <B>readResourceFileAsStream</B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;resourceName)
                                             throws <A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>读取文件类型资源，返回一个带缓存的输入流.
 
 <p>
 readResourceFileAsStream 支持边读边处理
 </p>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>resourceName</CODE> - 资源名称
<DT><B>Returns:</B><DD>资源内容的<A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/BufferedInputStream.html?is-external=true" title="class or interface in java.io"><CODE>BufferedInputStream</CODE></A>
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE> - 资源未声明、资源类型不匹配以及其他读取错误抛异常</DL>
</DD>
</DL>
<HR>

<A NAME="readResourceTable(java.lang.String)"><!-- --></A><H3>
readResourceTable</H3>
<PRE>
<A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</A>&lt;<A HREF="../../../../com/aliyun/odps/data/Record.html" title="interface in com.aliyun.odps.data">Record</A>&gt; <B>readResourceTable</B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;resourceName)
                                   throws <A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>读取表类型资源，ODPS的小表（Table）也可以作为资源，大小限制参见ODPS的相关文档.
 
 <p>
 使用表类型资源步骤：<br/>
 <ol>
 <li>增加资源表： console < add table my_table partition(ds='1') as res_table;
 <li>运行M/R作业命令: console < jar -resources res_table ...，或者使用API（
 <CODE>JobConf#addResources(String)</CODE>）
 <li>M/R里读取资源：context.readResourceTable("res_table");
 </ol>
 </p>
 
 <p>
 代码示例：
 
 <pre>
 Iterator&lt;Record&gt; iter = context.readResourceTable(&quot;res_table&quot;);
 while (iter.hasNext()) {
   Record r = iter.next();
   // handle record
 }
 </pre>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>resourceName</CODE> - 表类型资源名称
<DT><B>Returns:</B><DD>记录迭代器
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE> - 资源未声明、资源类型不匹配以及其他错误抛异常</DL>
</DD>
</DL>
<HR>

<A NAME="getCounter(java.lang.Enum)"><!-- --></A><H3>
getCounter</H3>
<PRE>
<A HREF="../../../../com/aliyun/odps/counter/Counter.html" title="class in com.aliyun.odps.counter">Counter</A> <B>getCounter</B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html?is-external=true" title="class or interface in java.lang">Enum</A>&lt;?&gt;&nbsp;name)</PRE>
<DL>
<DD>获取给定名称的Counter对象，name为<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html?is-external=true" title="class or interface in java.lang"><CODE>Enum</CODE></A>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - Counter名称
<DT><B>Returns:</B><DD>Counter</DL>
</DD>
</DL>
<HR>

<A NAME="getCounter(java.lang.String, java.lang.String)"><!-- --></A><H3>
getCounter</H3>
<PRE>
<A HREF="../../../../com/aliyun/odps/counter/Counter.html" title="class in com.aliyun.odps.counter">Counter</A> <B>getCounter</B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;group,
                   <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;name)</PRE>
<DL>
<DD>获取给定组名和名称的 Counter 对象.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>group</CODE> - Counter 组名<DD><CODE>name</CODE> - Counter 名
<DT><B>Returns:</B><DD>Counter</DL>
</DD>
</DL>
<HR>

<A NAME="progress()"><!-- --></A><H3>
progress</H3>
<PRE>
void <B>progress</B>()</PRE>
<DL>
<DD>向 MapReduce 框架报告进度.
 
 如果用户方法处理时间很长，且中间没有调用框架，可以调用这个方法避免task超时，框架默认600秒超时.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/TaskContext.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/aliyun/odps/mapred/RunningJob.html" title="interface in com.aliyun.odps.mapred"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/aliyun/odps/mapred/TaskId.html" title="class in com.aliyun.odps.mapred"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/aliyun/odps/mapred/TaskContext.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="TaskContext.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2014 <a href="http://www.aliyun.com">Alibaba Cloud Computing</a>. All rights reserved.
</BODY>
</HTML>
